import{j as s}from"./chunk-aAkv6woa.js";import{r as e}from"./chunk-CRvknJha.js";import{o as a,s as r,f as n,i,C as l,a as d,b as c,d as o,c as t,j as m,k as x,l as j,m as h,n as u,I as p,p as f,B as w,t as g,J as y}from"../assets/index-i8wSawhV.js";import{T as b,a as v,b as P,c as N}from"./chunk-CKUYYoyY.js";import{av as k,B as E}from"./chunk-CFjh8-P5.js";import{a as A,L as S}from"./chunk-BS4ofh5H.js";import"./chunk-oqmhCI76.js";import"./chunk-DdJ5UvfL.js";import"./chunk-Djsr9rkS.js";const C=a({email:r().email("Please enter a valid email"),password:r().min(6,"Password must be at least 6 characters")}),I=a({name:r().min(1,"Please enter your name"),email:r().email("Please enter a valid email"),password:r().min(6,"Password must be at least 6 characters"),confirmPassword:r(),adminEmail:r().email("Please enter a valid admin email"),adminPassword:r().min(6,"Admin password must be at least 6 characters")}).refine(s=>s.password===s.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),B=()=>{const[a,r]=e.useState(!1),[B,L]=e.useState("login"),V=A(),W=n({resolver:i(C),defaultValues:{email:"",password:""}}),F=n({resolver:i(I),defaultValues:{name:"",email:"",password:"",confirmPassword:"",adminEmail:"",adminPassword:""}});return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(S,{to:"/",className:"inline-flex items-center gap-2 text-sm text-gray-800 hover:text-primary transition-colors",children:[s.jsx(k,{className:"w-4 h-4"}),"Back to Website"]})}),s.jsxs(l,{className:"shadow-xl border-0 bg-card/50 backdrop-blur-sm",children:[s.jsxs(d,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-primary-glow rounded-xl flex items-center justify-center mx-auto mb-4",children:s.jsx(E,{className:"w-6 h-6 text-primary-foreground"})}),s.jsx(c,{className:"text-2xl",children:"MangosOrange Admin"}),s.jsx(o,{children:"Career Management System"})]}),s.jsx(t,{children:s.jsxs(b,{value:B,onValueChange:L,children:[s.jsxs(v,{className:"grid w-full grid-cols-2",children:[s.jsx(P,{value:"login",children:"Login"}),s.jsx(P,{value:"signup",children:"Sign Up"})]}),s.jsx(N,{value:"login",className:"space-y-4 mt-6",children:s.jsx(m,{...W,children:s.jsxs("form",{onSubmit:W.handleSubmit(async s=>{r(!0);try{const e=await g.signIn(s.email,s.password);e?(y.success("Welcome back!"),"Admin"===e.role?V("/admin/dashboard"):V("/admin")):y.error("Invalid credentials")}catch(e){y.error("Login failed")}finally{r(!1)}}),className:"space-y-4",children:[s.jsx(x,{control:W.control,name:"email",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Email"}),s.jsx(u,{children:s.jsx(p,{placeholder:"Enter your email",...e})}),s.jsx(f,{})]})}),s.jsx(x,{control:W.control,name:"password",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Password"}),s.jsx(u,{children:s.jsx(p,{type:"password",placeholder:"Enter password",...e})}),s.jsx(f,{})]})}),s.jsx(w,{type:"submit",className:"w-full",disabled:a,children:a?"Signing in...":"Sign In"})]})})}),s.jsx(N,{value:"signup",className:"space-y-4 mt-6",children:s.jsx(m,{...F,children:s.jsxs("form",{onSubmit:F.handleSubmit(async s=>{r(!0);try{const e=await g.verifyAdminCredentials(s.adminEmail,s.adminPassword);if(!e)return void y.error("Invalid admin credentials. Only admins can create accounts.");if(!(await g.signUpWithAdminToken(s.email,s.password,"Recruiter",s.name,e)))return void y.error("Failed to create account");if(!(await g.signIn(s.email,s.password)))return void y.error("Account created, but login failed. Please sign in.");y.success("Account created successfully!"),V("/admin")}catch(e){y.error("Signup failed")}finally{r(!1)}}),className:"space-y-4",children:[s.jsx(x,{control:F.control,name:"name",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Full Name"}),s.jsx(u,{children:s.jsx(p,{placeholder:"Enter your full name",...e})}),s.jsx(f,{})]})}),s.jsx(x,{control:F.control,name:"email",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Email"}),s.jsx(u,{children:s.jsx(p,{placeholder:"Enter your email",...e})}),s.jsx(f,{})]})}),s.jsx(x,{control:F.control,name:"password",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Password"}),s.jsx(u,{children:s.jsx(p,{type:"password",placeholder:"Enter password",...e})}),s.jsx(f,{})]})}),s.jsx(x,{control:F.control,name:"confirmPassword",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Confirm Password"}),s.jsx(u,{children:s.jsx(p,{type:"password",placeholder:"Re-enter password",...e})}),s.jsx(f,{})]})}),s.jsxs("div",{className:"border-t pt-4 mt-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Admin verification required to create accounts:"}),s.jsx(x,{control:F.control,name:"adminEmail",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Admin Email"}),s.jsx(u,{children:s.jsx(p,{placeholder:"Enter admin email",...e})}),s.jsx(f,{})]})}),s.jsx(x,{control:F.control,name:"adminPassword",render:({field:e})=>s.jsxs(j,{children:[s.jsx(h,{children:"Admin Password"}),s.jsx(u,{children:s.jsx(p,{type:"password",placeholder:"Enter admin password",...e})}),s.jsx(f,{})]})})]}),s.jsx(w,{type:"submit",className:"w-full",disabled:a,children:a?"Creating account...":"Create Account"})]})})})]})})]})]})})};export{B as default};
