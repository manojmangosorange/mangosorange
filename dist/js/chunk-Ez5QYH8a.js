import{j as e}from"./chunk-aAkv6woa.js";import{r as s}from"./chunk-CRvknJha.js";import{C as a,a as t,b as r,y as l,B as i,c,T as n,J as d}from"../assets/index-i8wSawhV.js";import{B as m,c as o}from"./chunk-C2Wav99Y.js";import{S as x,a as h,b as u,c as j,d as p}from"./chunk-B6dbaAgB.js";import{m as v,g,P as b,aB as N,a4 as f,ah as w,aF as y,X as k}from"./chunk-CFjh8-P5.js";const S=({applicant:S,onUpdate:A,jobTitle:C,isGeneralApplication:R=!1,selectable:z=!1,selected:L=!1,onToggleSelect:B})=>{const[D,H]=s.useState(!1),[I,T]=s.useState(S.status),[F,G]=s.useState(S.notes||""),[U,$]=s.useState(!1);return e.jsxs(a,{className:"hover:shadow-md transition-shadow",children:[e.jsx(t,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-lg",children:S.name}),e.jsx("div",{className:"mt-2 mb-1",children:R?e.jsxs(m,{variant:"outline",className:"border-blue-500 text-blue-700 bg-blue-50",children:[e.jsx(v,{className:"w-3 h-3 mr-1"}),"General Application (Resume Drop)"]}):C&&e.jsx(m,{variant:"secondary",children:C})}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("a",{href:`mailto:${S.email}`,className:"hover:text-primary",children:S.email})]}),S.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("a",{href:`tel:${S.phone}`,className:"hover:text-primary",children:S.phone})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[z&&e.jsx(l,{checked:L,onCheckedChange:()=>B?.(S.id)}),e.jsx(m,{className:(e=>{switch(e){case"Applied":return"bg-blue-100 text-blue-800";case"Shortlisted":return"bg-yellow-100 text-yellow-800";case"Interviewed":return"bg-purple-100 text-purple-800";case"Hired":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(S.status),children:S.status}),!D&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>H(!0),children:e.jsx(N,{className:"w-4 h-4"})})]})]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),"Applied: ",new Date(S.appliedAt).toLocaleDateString()]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>window.open(S.resumeUrl,"_blank"),children:[e.jsx(w,{className:"w-4 h-4 mr-1"}),"Resume"]})]}),S.coverLetter&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-foreground mb-1",children:"Cover Letter:"}),e.jsx("div",{className:"text-sm text-gray-800 bg-muted/50 p-3 rounded-lg",children:S.coverLetter})]}),D?e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Status"}),e.jsxs(x,{value:I,onValueChange:e=>T(e),children:[e.jsx(h,{children:e.jsx(u,{})}),e.jsxs(j,{children:[e.jsx(p,{value:"Applied",children:"Applied"}),e.jsx(p,{value:"Shortlisted",children:"Shortlisted"}),e.jsx(p,{value:"Interviewed",children:"Interviewed"}),e.jsx(p,{value:"Hired",children:"Hired"}),e.jsx(p,{value:"Rejected",children:"Rejected"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Notes"}),e.jsx(n,{value:F,onChange:e=>G(e.target.value),placeholder:"Add notes about this applicant...",rows:3})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{onClick:async()=>{$(!0);try{await o.updateApplicantStatus(S.id,I,F)?(d.success("Applicant updated successfully"),H(!1),A()):d.error("Failed to update applicant")}catch(e){d.error("An error occurred")}finally{$(!1)}},disabled:U,size:"sm",children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),U?"Saving...":"Save"]}),e.jsxs(i,{variant:"outline",onClick:()=>{T(S.status),G(S.notes||""),H(!1)},size:"sm",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"Cancel"]})]})]}):S.notes&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"text-sm font-medium text-foreground mb-1",children:"Notes:"}),e.jsx("div",{className:"text-sm text-gray-800 bg-muted/50 p-3 rounded-lg",children:S.notes})]})]})]})};export{S as A};
